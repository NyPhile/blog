<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title>这个 + 那个</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0,  minimum-scale=1.0, maximum-scale=1.0">
	<style type="text/css">
		html,body{height: 100%;}*{margin: 0;padding: 0;font-family: "微软雅黑";line-height: 1;position: relative;}
		.top,.btm{height: 33.3%;text-align: center;color: #fff;font-size:2em;position: relative;overflow: hidden;}
		.top{background: #46C579;}.btm{background: #3CAC69;}
		.btn{height:33.3%;font-family: Arial;font-size: 2em;text-align: center;display: -webkit-flex;}
		.lock{position: absolute;font-size: 0.5em;color: rgba(255,255,255,0.75);right: 1em;bottom: 1em;display: none;z-index: 99;}
		.btn p{padding: 0 2em;border:1px solid #3CAC69;border-radius: 2em;line-height: 2em;color: #3CAC69;margin: auto;}
		.welcome{position: absolute;left: 0;top: 0;width: 100%;height: 100%;background:#fff; z-index: 10;overflow: hidden;}
		.page_top,.page_btm{width: 100%;height:100%;display: -webkit-flex;color: #fff;font-size: 2em;background: #46C579;}
		.page_top p,.page_btm p{margin:auto;}
		.page_btm{background: #3CAC69;height: 50%;position: relative;}
		.top ul,.btm ul{
			position: absolute;left: 0;top: 0;
			width: 100%;height: 100%;
		}
		.top ul li,.btm ul li{width: 100%;height: 100%;float: left;display: -webkit-flex;position: absolute;left: 100%;-webkit-transition: all 0.5s ease;}
		.top ul li.active,.btm ul li.active{left: 0px;}
		.top ul li.left,.btm ul li.left{left: -100%;}
		.top ul span,.btm ul span{margin:auto;}
	</style>
	<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js"></script>
</head>
<body>
	<div class="welcome">
		<div class="page_top"><p>这个</p></div>
		<div class="page_btm"><p>那个</p></div>
		<div class="btn" id="btn">
			<p>点击</p>
		</div>
	</div>
	<div class="top" id="top" onclick="lockp1()">
		<span class="lock">锁定</span>
		<ul>
			<li class="active"><span>土豆</span></li>
		</ul>
	</div>
	<div class="btm" id="btm" onclick="lockp2()">
		<span class="lock">锁定</span>
		<ul>
			<li class="active"><span>好吃</span></li>
		</ul>
	</div>
	<div class="btn" id="btn">
		<p onclick="shake()">点击</p>
	</div>
	<script type="text/javascript">
		var _char = [ "高速铁路","达·芬奇","存款","火腿","杀人游戏","自驾游","玄关","文化遗产","队长","报纸","移动","编程","等级","点数","文章","匿名","银行","杂志","灰色","法律","功能","海参","股票","新秀","场所","单身公寓","舞蹈","线索"];
		var words = {"words":[{"content":"3d打印","id":null},{"content":"中国队","id":null},{"content":"葫芦娃","id":null},{"content":"语音","id":null},{"content":"词典","id":null},{"content":"考拉","id":null},{"content":"阿童木","id":null},{"content":"肖恩羊","id":null},{"content":"奇趣蛋","id":null},{"content":"冰欺凌机","id":null},{"content":"冰淇凌","id":null},{"content":"电影院","id":null},{"content":"咖啡","id":null},{"content":"香水","id":null},{"content":"纸巾","id":null},{"content":"猫","id":null},{"content":"小龙女","id":null},{"content":"鸡腿","id":null},{"content":"充电器","id":null},{"content":"口罩","id":null},{"content":"眼镜","id":null},{"content":"跑步机","id":null},{"content":"急支糖浆","id":null},{"content":"计算机","id":null},{"content":"奶茶","id":null},{"content":"网购","id":null},{"content":"摇滚","id":null},{"content":"排练室","id":null},{"content":"KTV","id":null},{"content":"预定","id":null},{"content":"旅游","id":null},{"content":"机票","id":null},{"content":"支付","id":null},{"content":"日程表","id":null},{"content":"胸罩","id":null},{"content":"布娃娃","id":null},{"content":"气球","id":null},{"content":"袜子","id":null},{"content":"上课","id":null},{"content":"占座","id":null},{"content":"笔记","id":null},{"content":"黑板","id":null},{"content":"路由器","id":null},{"content":"投影仪","id":null},{"content":"女性","id":null},{"content":"游戏","id":null},{"content":"高清","id":null},{"content":"购物","id":null},{"content":"育儿","id":null},{"content":"o2o","id":null},{"content":"金融","id":null},{"content":"免费电话","id":null},{"content":"垂直电商","id":null},{"content":"智能硬件","id":null},{"content":"平台","id":null},{"content":"小伙伴们快来填词啦～～","id":null},{"content":"大姨妈","id":null},{"content":"摩擦","id":null}],"version":3};
		$(".page_top").animate({height:'50%'},1200,step2);
		loadwords(10,"#top");
		loadwords(10,"#btm");
		function step2 () {
			var t=setTimeout("$('.page_top').animate({height:'33.3%'},1200,step3);$('.page_btm').animate({height:'33.3%'},1200)",1000)	
		}
		function step3 () {
			$(".welcome").animate({opacity: '0'},500);
			var t=setTimeout("$('.welcome').hide()",500);
		}
		var lockp1flag = 0, lockp2flag = 0,p1index = 0,p2index = 0;
		function lockp1 () {
			if(lockp1flag == 0){
				lockp1flag = 1;
				$("#top .lock").show();
			}
			else{
				lockp1flag = 0;
				$("#top .lock").hide();
			}
		}
		function lockp2 () {
			if(lockp2flag == 0){
				lockp2flag= 1;
				$("#btm .lock").show();
			}
			else{
				lockp2flag = 0;
				$("#btm .lock").hide();
			}	
		}
		function nextTop(){
			if(!lockp1flag){
				$("#top .active").removeClass("active").addClass("left");
				$($("#top li")[p1index+1]).addClass("active");
				p1index+=1;
			}
		}
		function nextBtm() {
			if(!lockp2flag){
				$("#btm .active").removeClass("active").addClass("left");
				$($("#btm li")[p2index+1]).addClass("active");
				p2index+=1;
			}
		}
		function preTop(){
			if(!lockp1flag&&p1index>0){
				$("#top .active").removeClass("active");
				$($("#top li")[p1index-1]).removeClass("left").addClass("active");
				p1index-=1;
			}
		}
		function preBtm() {
			if(!lockp2flag&&p2index>0){
				$("#btm .active").removeClass("active");
				$($("#btm li")[p2index-1]).removeClass("left").addClass("active");
				p2index-=1;
			}
		}
		function shake(){
			if(!lockp1flag){
				nextTop();
				setTimeout(function(){
					if(p1index<($("#top ul li").length-3)){
						loadwords(10,"#top");
					}
				},500)				
			}
			if(!lockp2flag){
				nextBtm();
				setTimeout(function(){
					if(p2index<($("#btm li").length-3)){
						loadwords(10,"#btm");
					}
				},500)
			}
			if(lockp1flag && lockp2flag){
				alert("全锁了！怎么换嘛！");
			}
		}
		function loadwords (number,torb) {
			//$(torb+" li").width($("#top").width());
			for (var i = 0; i < number; i++) {
				$(torb+" ul")[0].innerHTML += '<li><span>'+ words.words[parseInt(words.words.length*Math.random())].content+'</span></li>';
			}
			//$(torb+" li").width($("#top").width());
		}
		// 滑动事件
		function touches(obj,direction,fun){
			//obj:ID对象
			//direction:swipeleft,swiperight,swipetop,swipedown,singleTap,touchstart,touchmove,touchend
			//          划左，    划右，     划上，   划下，    点击，    开始触摸， 触摸移动， 触摸结束
			//fun:回调函数
			var defaults = {x: 5,y: 5,ox:0,oy:0,nx:0,ny:0};
			direction=direction.toLowerCase();
			//配置：划的范围在5X5像素内当点击处理
			obj.addEventListener("touchstart",function() {
				defaults.ox = event.targetTouches[0].pageX;
				defaults.oy = event.targetTouches[0].pageY;
				defaults.nx = defaults.ox;
				defaults.ny = defaults.oy;
				if(direction.indexOf("touchstart")!=-1)fun();
			}, false);
			obj.addEventListener("touchmove",function() {
				event.preventDefault();
				defaults.nx = event.targetTouches[0].pageX;
				defaults.ny = event.targetTouches[0].pageY;
				if(direction.indexOf("touchmove")!=-1)fun();
			}, false);
			obj.addEventListener("touchend",function() {
				var changeY = defaults.oy - defaults.ny;
				var changeX = defaults.ox - defaults.nx;
				if(Math.abs(changeX)>Math.abs(changeY)&&Math.abs(changeY)>defaults.y){
					//左右事件
					if(changeX > 0) {
						if(direction.indexOf("swipeleft")!=-1)fun();
					}else{
						if(direction.indexOf("swiperight")!=-1)fun();
					}
				}else if(Math.abs(changeY)>Math.abs(changeX)&&Math.abs(changeX)>defaults.x){
					//上下事件
					if(changeY > 0) {
						if(direction.indexOf("swipetop")!=-1)fun();
					}else{
						if(direction.indexOf("swipedown")!=-1)fun();
					}
				}else{
					//点击事件
					if(direction.indexOf("singleTap")!=-1)fun();
				}
				if(direction.indexOf("touchend")!=-1)fun();
			}, false);
		};
		touches($("#top")[0],"swipeleft",nextTop);
		touches($("#top")[0],"swiperight",preTop);
		touches($("#btm")[0],"swipeleft",nextBtm);
		touches($("#btm")[0],"swiperight",preBtm);
	</script>
</body>
</html>